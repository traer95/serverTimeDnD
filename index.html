<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Timesync for DnD</title>
    <script language="javascript" src="serverTime.js"></script>

</head>
<body>
<div id="display">
start
</div>
</body>

<script language="javascript">
    //document.write("Local machine time is: " + localTime + "<br>");
    //var date;
    var start_time;
    var current_time;
    var get_time = function () {
        let options = {
                timeZone: 'Europe/Berlin',
                year: 'numeric',
                month: 'numeric',
                day: 'numeric',
                hour: 'numeric',
                minute: 'numeric',
                second: 'numeric',
            },
            formatter = new Intl.DateTimeFormat([], options);

        dummy =  formatter.format(new Date());

        start_time = new Date();
        //console.log("dummy is: " + dummy+ " " +  new Date(dummy.year, dummy.month, dummy.day));

        document.getElementById("display").innerHTML ="Server time is: " + current_time;
    };


    //var localTime = new Date();
    //setInterval(function () {
    //var st = srvTime();

    //var time = date.getHours() + ":" + date.getMinutes() + ":" + date.getSeconds();
    //console.log("why: "+date);

    //console.log(+Date.now() + timeDiff);
    //}, 100);

    var cnt_time = function () {
        current_time = new Date(start_time.getTime() + 250);
        document.getElementById("display").innerHTML ="Server time is: " + current_time;
        start_time = current_time;
    };

    setInterval(cnt_time, 250);
    setInterval(get_time,30250);
    get_time();

</script>
</html>